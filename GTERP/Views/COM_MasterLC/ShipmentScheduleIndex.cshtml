@model IEnumerable<GTERP.Models.COM_MasterLC_Details>

<head>

    <style>

        th {
            font-size: 14px;
        }

        td {
            font-size: 13px;
        }


        div.dataTables_length {
            float: right;
        }
        /*.dt-buttons {

        }*/
        /*div.dataTables_length select {
            font-size:17px;

        }*/
        /*div.dataTables_length> label {
            display: none;
        }*/
        div.dataTables_filter {
            float: left;
            /*font-size: 17px;*/
        }

        div.dt-buttons {
            float: right;
            font-size: 12px !important;
        }
        /*div.dataTables_info {
            float: left;
        }*/

        div.dataTables_paginate {
            float: right;
        }

        div.DTTT {
            float: left;
            margin-right: 50px;
        }

        div.buttons {
            clear: both;
        }

        .fas, .far {
            font-size: 10px !important;
        }


        table.dataTable tbody td, .sorting {
            vertical-align: middle;
            text-align: center;
        }

        .sorting_asc {
            color: green;
            vertical-align: middle;
            text-align: center;
            font-style: oblique;
        }

        .sorting_desc {
            color: #0932d1;
            vertical-align: middle;
            text-align: center;
            font-style: oblique;
        }

        .table-sm th {
            padding: .8em;
            background: rgb(192,196,196);
            background: linear-gradient(0deg, rgba(192,196,196,0.6224556717218137) 1%, rgba(255,255,255,0.6224556717218137) 65%, rgba(151,149,162,0.2527077725621498) 100%);
            font-family: 'Roboto Condensed', sans-serif;
            font-weight: 500;
            font-size: 15px;
        }

        .table-hover tbody tr:hover td, .table-hover tbody tr:hover th {
            background: linear-gradient(0deg, rgba(192,196,196,0.6224556717218137) 1%, rgba(255,255,255,0.6224556717218137) 65%, rgba(151,149,162,0.2527077725621498) 100%);
        }

        #styletext {
            color: transparent;
            background: #666666;
            -webkit-background-clip: text;
            -moz-background-clip: text;
            background-clip: text;
            text-shadow: 0px 3px 3px rgba(255,255,255,0.5);
            font-weight: 100;
            font-size: 30px;
        }
    </style>
</head>

<form action="" method="post">
    <div class="container-fluid">
    <div class="card p-2">

        <div class="row mb-2">
            <div class="col-md-4 col-12">
                <div class="input-group mb-2">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Buyer</span>
                    </div>
                    @Html.DropDownList("BuyerGroupId", null, "=Please Select=", htmlAttributes: new { @class = "form-control" })
                </div>
            </div>
            <div class="col-md-2 col-12">
                <input id="btnload" type="submit" value="Load" class="btn btn-success btn-block rounded-0" />
            </div>
            <div class="col-md-6 col-12">
                <h4 id="styletext">Buyer Wise Shipment Schedule List</h4>
            </div>
            <div class="col-md-12">
                @*<div class="row text-center">*@
                @*<div class="col-md-4">
                        <div class="form-group row">
                            <label for="FDate" class="col-sm-4 col-form-label">From Date : </label>
                            <div class="col-sm-8">

                                @Html.TextBox("FromDate", null, new { @class = "form-control text-center FromDate", @placeholder = "Select From Date ", @autocomplete = "off", name = "FromDate" })

                            </div>

                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group row">
                            <label for="TDate" class="col-sm-4 col-form-label">To Date : </label>
                            <div class="col-sm-8">
                                @Html.TextBox("ToDate", null, new { @class = "form-control text-center ToDate", @placeholder = "Select To Date ", @autocomplete = "off", name = "ToDate" })
                            </div>
                        </div>
                    </div>*@
                @*</div>*@

            </div>
        </div>

        <div class="table-responsive text-nowrap">
            <table id="tbllist" class="table table-striped table-bordered table-sm table-hover text-center" cellspacing="0" width="100%">
                <thead>
                    <tr>
                        <th>
                            @Html.DisplayNameFor(model => model.COM_MasterLC.PaymentTerms.PaymentTermsName)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.ExportPONo)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.StyleName)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.ItemName)
                        </th>
                        <th>
                            @Html.DisplayName("Qty In Pack")
                        </th>
                        <th>
                            @Html.DisplayName("Qty In Dzn")
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.UnitPrice)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.TotalValue)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.COM_MasterLC.BuyerInformations.BuyerName)
                        </th>

                        <th>
                            @Html.DisplayNameFor(model => model.COM_MasterLC.BuyerLCRef)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.ShipmentDate)
                        </th>
                        <th>
                            @Html.DisplayNameFor(model => model.Destination)
                        </th>

                        <th>
                            @Html.DisplayName("Month And Year")
                        </th>




                    </tr>
                <thead>
                <tbody>
                    @foreach (var item in Model)
                    {

                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.COM_MasterLC.PaymentTerms.PaymentTermsName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ExportPONo)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.StyleName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ItemName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.OrderQty)
                        </td>
                        <td>
                            @Html.Display(((item.OrderQty * item.Factor)/12).ToString())

                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.UnitPrice)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.TotalValue)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.COM_MasterLC.BuyerInformations.BuyerName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.COM_MasterLC.BuyerLCRef)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ShipmentDate)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Destination)
                        </td>
   
                        <td>
                            @Convert.ToString(string.Format("{0:MMMM}", item.ShipmentDate)) ,  @Convert.ToString(string.Format("{0:yyyy}", item.ShipmentDate))
                        </td>
                    </tr>
                    }

                </tbody>

            </table>
        </div>
    </div>
    </div>

</form>

<script>
    var tblVouchersub;
    $("#BuyerGroupId").select2();
    $("#btnload").hide();
    $("#BuyerGroupId").change(function () {
        $("#btnload").click();

        //TermsLoad();
    });

    $(document).ready(function () {

        $('#tbllist').DataTable({
            dom: '<"dom_wrapper fh-fixedHeader"flB>tip',
            buttons: [
                'copy', 'csv', 'excel', 'pdf'
            ],
            "searching": true,
            "paging": true,
            "ordering": true,
            "info": true,
            "iDisplayLength": 20,
            "lengthMenu": [[5, 10, 20, 50, -1], [5, 10, 20, 50, "All"]],
            "scrollX": true,
            "scrollCollapse": true,
            language: {
                sLengthMenu: "_MENU_"
            },
            rowGroup: {
                dataSrc: [12]
            }
            //"drawCallback": function (settings) {
            //    var api = this.api();
            //    var rows = api.rows({ page: 'current' }).nodes();
            //    var last = null;

            //    api.rows({ page: 'current' }).data().each(function (data, i) {
            //        var group = data[7];
            //        var groupLink = '<a href="#">' + $('<div>').text(group).html() + '</a>';

            //        if (last !== group) {
            //            $(rows).eq(i).before(
            //                '<tr class="group"><td colspan="11">' + groupLink + '</td></tr>'
            //            );

            //            last = group;
            //        }
            //    });
            //}
        });
    });
    //}


    $(document).ready(function () {
        CurrentDate();
        $(".FromDate").datepicker({

            dateFormat: "dd-M-y",
            changeMonth: true,
            changeYear: true
        });
        $(".ToDate").datepicker({

            dateFormat: "dd-M-y",
            changeMonth: true,
            changeYear: true

        });

        function CurrentDate() {
            var date = new Date();
            var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul",
                "Aug", "Sep", "Oct", "Nov", "Dec"];
            var val = date.getDate() + "-" + months[date.getMonth()] + "-" + date.getFullYear();

            if ($(".FromDate").val() == '') {
                $(".FromDate").val(val);
            }
            if ($(".ToDate").val() == '') {
                $(".ToDate").val(val);
            }
        }
    });

</script>

