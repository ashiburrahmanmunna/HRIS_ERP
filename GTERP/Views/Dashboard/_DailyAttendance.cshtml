@model GTERP.ViewModels.DailyAttendance

<link href="~/Content/ProjectLibFile/css/customCssFile/customFormStyle.css" rel="stylesheet" />

@using (Html.BeginForm("Index", "Dashboard", FormMethod.Post))
{
    <div class="card mb-4 p-3">

        <div class="box-header card card-header-style purple-gradient">
            <div class="row">
                <div class="col-md-9 col-12">
                    <h3 class="box-title">Daily Attendance </h3>
                </div>
                <div class="col-md-3 col-12">
                    <div class="form-group mb-0">
                        <div class="input-group">
                            <input type="text" name="dtLoad" value="@ViewBag.DtLoad" id="dtLoad" class="form-control" />
                            <div class="input-group-append">
                                <button id="btnLoad" class="btn btn-warning btn-flat" type="button">Load</button>
                            </div>
                        </div>
                    </div>
                    @*<div class="box-tools">
                            <div class="input-group pull-right">
                                <span class="input-group-btn">
                                </span>
                            </div>
                        </div>*@
                </div>
            </div>
        </div>
        <div class="card-body pt-3">
            <div class="row">
                <div class="col-md-6 col-12 ">
                    <div class="row">
                        <div class="col-md-6 col-12">
                            <a asp-controller="DailyAttendActive" asp-action="Present" asp-route-Date="@ViewBag.DtLoad" target="_blank">
                                <div class="info-box bg-blue-active card">
                                    <span class="info-box-icon" style="background: rgba(0, 0, 0, 0)">
                                        <img src="~/Content/appasset/present.ico" />
                                    </span>
                                    <div class="info-box-content">
                                        <P class="info-box-text float-right">Present</P>
                                        <br />
                                        <span class="info-box-number">@Model.Present</span>
                                        <span class="info-box-text">of @Model.TotalEmployee</span>
                                        <div class="progress">
                                            <div class="progress-bar" style="width: @Model.PresentPercent%;"></div>
                                        </div>
                                    </div>
                                    <span class="progress-description info-box-text">@Model.PresentPercent % present on @Model.LastProcessDate.ToString("dd-MMM-yyyy")</span>
                                </div>
                            </a>
                        </div>@**End of present info coloum*@
                        <div class="col-md-6 col-12">
                            <a asp-controller="DailyAttendActive" asp-action="Absent" asp-route-Date="@ViewBag.DtLoad" target="_blank">
                                <div class="info-box bg-red card">
                                    <span class="info-box-icon" style="background: rgba(0,0,0,0)"><img src="~/Content/appasset/absent.ico" /></span>
                                    <div class="info-box-content">
                                        <p class="info-box-text float-right">Absent</p>
                                        <br />
                                        <span class="info-box-number">@Model.Absent</span>
                                        <span class="info-box-text"> Of @Model.TotalEmployee</span>
                                        <div class="progress">
                                            <div id="presentwidth" class="progress-bar" style="width: @Model.AbsentPercent%;"></div>
                                        </div>
                                    </div>
                                    <span class="progress-description info-box-text">@Model.AbsentPercent % absent on @Model.LastProcessDate.ToString("dd-MMM-yyyy")</span>
                                </div>
                            </a>
                        </div>@**End of Absent info coloum*@
                        @***End of first info row*@

                        <div class="col-md-6 col-12">
                            <a asp-controller="DailyAttendActive" asp-action="Late" asp-route-Date="@ViewBag.DtLoad" target="_blank">
                                <div class="info-box bg-yellow-active card">
                                    <span class="info-box-icon" style="background: rgba(0,0,0,0)"><img src="~/Content/appasset/Le.ico" /></span>
                                    <div class="info-box-content" >
                                        <P class="info-box-text float-right">Late</P>
                                        <br />
                                        <span class="info-box-number">@Model.Late</span>
                                        <span class="info-box-text">of @Model.TotalEmployee</span>
                                        <div class="progress">
                                            <div class="progress-bar" style="width:@Model.LatePercent%;"></div>
                                        </div>
                                    </div>
                                    <span class="progress-description info-box-text">@Model.LatePercent % late on @Model.LastProcessDate.ToString("dd-MMM-yyyy")</span>
                                </div>
                            </a>
                        </div>@**End of Late info coloum*@
                        <div class="col-md-6 col-12">
                            <a asp-controller="DailyAttendActive" asp-action="Leave" asp-route-Date="@ViewBag.DtLoad" target="_blank">
                                <div class="info-box bg-green card">
                                    <span class="info-box-icon" style="background: rgba(0,0,0,0)"><img class="img-responsive" src="~/Content/appasset/leave.ico" /></span>
                                    <div class="info-box-content">
                                        <p class="info-box-text float-right">Leave</p>
                                        <br />
                                        <span class="info-box-number">@Model.Leave</span>
                                        <span class="info-box-text">of @Model.TotalEmployee</span>
                                        <div class="progress">
                                            <div id="presentwidth" class="progress-bar" style="width: @Model.LeavePercent%"></div>
                                        </div>
                                    </div>
                                    <span class="progress-description info-box-text">@Model.LeavePercent % leave on @Model.LastProcessDate.ToString("dd-MMM-yyyy")</span>
                                </div>
                            </a>
                        </div>



                        @**End of Leave info coloum*@
                    </div>@***End of second info row*@


                </div>@**End of info body*@

                <div class="col-md-3 col-12">
                    <div >
                        <a asp-controller="DailyAttendActive" asp-action="WHDay" asp-route-Date="@ViewBag.DtLoad" target="_blank">

                            <div class="info-box card" style="background-color:rgb(152 44 187); height:317px;">
                                <p class="info-box-text float-right">OffDay</p>
                                <div style="margin-bottom:50px;"></div>
                                <span class="info-box-icon" style="background: rgba(0,0,0,0)">

                                    <img class="img-responsive" src="~/Content/appasset/WH.png" />
                                </span>

                                <div class="info-box-content">

                                    <br />
                                    <span class="info-box-number">@Model.WHDay</span>
                                    <span class="info-box-text">of @Model.TotalEmployee</span>
                                    <div class="progress">
                                        <div id="presentwidth" class="progress-bar" style="width: @Model.WHDay%"></div>
                                    </div>
                                </div>
                                <span class="progress-description info-box-text text-center" >@Model.WHDayPercent % WHDay on @Model.LastProcessDate.ToString("dd-MMM-yyyy")</span>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="col-md-3 col-12 mx-0 px-0" style="width:100%; margin:auto 0 auto 0;">
                    <div id="donutchart" class="ml-2"></div>

                    @*style="width: 40em; height: 340px;"**@
                </div>@**End of chart body*@
            </div>@**End of box first row tag*@
        </div>
    </div>
    @*<div class="row">
            style="margin-top:-24px;"
            <div class="col-md-12 col-12">
                <div class="box box-solid card">
                    <div class="box-header with-border card card-header-style purple-gradient">
                        <div class="row">
                            <div class="col-md-8 col-12">
                                <h3 class="box-title">Daily Attendance</h3>
                            </div>
                            <div class="col-md-4 col-12">
                                <div class="box-tools">
                                    <div class="input-group pull-right">
                                        <input type="date" name="dtLoad" id="dtLoad" class="form-control" />
                                        <span class="input-group-btn">
                                            <button id="btnLoad" class="btn btn-warning btn-flat" type="submit">Load</button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>**End of header
                    <div class="box-body">
                        <div class="row">
                            <div class="col-md-7 col-12">
                                <div class="row">
                                    <div class="col-md-6 col-12">
                                        <div class="info-box bg-blue-active card">
                                            <span class="info-box-icon" style="background: rgba(0, 0, 0, 0)">
                                                <img class="fa" src="~/Content/appasset/present.ico" />
                                            </span>
                                            <div class="info-box-content">
                                                <P class="info-box-text pull-right">Present</P>
                                                <br />
                                                <span class="info-box-number">@Model.Present</span>
                                                <span class="info-box-text">of @Model.TotalEmployee</span>
                                                <div class="progress">
                                                    <div class="progress-bar" style="width: @Model.PresentPercent%;"></div>
                                                </div>
                                            </div>
                                            <span class="progress-description info-box-text" style="display: inline-block;margin-left: 5px;">@Model.PresentPercent % present on @Model.LastProcessDate.ToString("dd-MMM-yyyy")</span>
                                        </div>
                                    </div>*End of present info coloum
                                    <div class="col-md-6 col-12">
                                        <div class="info-box bg-red card">
                                            <span class="info-box-icon" style="background: rgba(0,0,0,0)"><img class="fa" src="~/Content/appasset/absent.ico" /></span>
                                            <div class="info-box-content">
                                                <p class="info-box-text pull-right">Absent</p>
                                                <br />
                                                <span class="info-box-number">@Model.Absent</span>
                                                <span class="info-box-text"> Of @Model.TotalEmployee</span>
                                                <div class="progress">
                                                    <div id="presentwidth" class="progress-bar" style="width: @Model.AbsentPercent%;"></div>
                                                </div>
                                            </div>
                                            <span class="progress-description info-box-text" style="display: inline-block;margin-left: 5px;">@Model.AbsentPercent % absent on @Model.LastProcessDate.ToString("dd-MMM-yyyy")</span>
                                        </div>
                                    </div>*End of Absent info coloum
                                    **End of first info row

                                    <div class="col-md-6 col-12">
                                        <div class="info-box bg-yellow-active card">
                                            <span class="info-box-icon" style="background: rgba(0,0,0,0)"><img class="fa" src="~/Content/appasset/Le.ico" /></span>
                                            <div class="info-box-content">
                                                <P class="info-box-text pull-right">Late</P>
                                                <br />
                                                <span class="info-box-number">@Model.Late</span>
                                                <p class="info-box-text">of @Model.TotalEmployee</p>
                                                <div class="progress">
                                                    <div class="progress-bar" style="width:@Model.LatePercent%;"></div>
                                                </div>
                                            </div>
                                            <span class="progress-description info-box-text" style="display: inline-block;margin-left: 5px;">@Model.LatePercent % late on @Model.LastProcessDate.ToString("dd-MMM-yyyy")</span>
                                        </div>
                                    </div>*End of Late info coloum
                                    <div class="col-md-6 col-12">
                                        <div class="info-box bg-green card">
                                            <span class="info-box-icon" style="background: rgba(0,0,0,0)"><img class="ion" src="~/Content/appasset/leave.ico" /></span>
                                            <div class="info-box-content">
                                                <p class="info-box-text pull-right">Leave</p>
                                                <br />
                                                <span class="info-box-number">@Model.Leave</span>
                                                <span class="info-box-text">of @Model.TotalEmployee</span>
                                                <div class="progress">
                                                    <div id="presentwidth" class="progress-bar" style="width: @Model.LeavePercent%"></div>
                                                </div>
                                            </div>
                                            <span class="progress-description info-box-text" style="display: inline-block;margin-left: 5px;">@Model.LeavePercent % leave on @Model.LastProcessDate.ToString("dd-MMM-yyyy")</span>
                                        </div>
                                    </div>*End of Leave info coloum
                                </div>**End of second info row
                            </div>*End of info body
                            <div class="col-md-5 col-12">
                                <div id="donutchart"></div>

                                style="width: 40em; height: 340px;"*
                            </div>*End of chart body
                        </div>*End of box first row tag
                    </div>*End of box body
                </div>***Box End Here
            </div>**End of coluom
        </div>* Daily attendance start*@
}


@section Scripts{
    <script>
    var present = @Model.Present;
    var absent =  @Model.Absent;
    var leave =@Model.Leave;
    var  late = @Model.Late;
    var ttl = @Model.TotalEmployee;

    var dpp = (present / ttl) * 100;
    var dap = (absent / ttl) * 100;
    var dlp = (late / ttl) * 100;
        var dlep = (leave / ttl) * 100;





    </script>



}